<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>PreFlopData ‚Äì An√°lisis de Torneos de P√≥ker</title>
    <link rel="stylesheet" href="style.css">

    <!-- Chart.js desde CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
<main>

    <!-- =========================================
         PANEL DE ESTAD√çSTICAS GENERALES
    ========================================== -->
    <h1>üìä Estad√≠sticas Generales del Dataset</h1>

    <section id="stats-panel">
        <p id="loading-text">Cargando estad√≠sticas...</p>

        <div id="error-panel" class="hidden">
            <p>üî¥ Error de conexi√≥n. Intenta generar un dataset.</p>
        </div>

        <div id="estadisticas"></div>
    </section>

    <section>
        <button id="generar-dataset">Generar nuevo dataset</button>
    </section>

    <hr>

    <!-- =========================================
         ANALIZADOR DE MANOS FASE POR FASE
    ========================================== -->
    <h1>üÉè Analizador de Manos por Fases</h1>

    <section id="interactive-panel">
        <form id="hand-form">

            <!-- Selecci√≥n de mano inicial -->
            <div class="form-section">
                <label>Tu Mano Inicial (Preflop):</label>
                <div class="card-selector-group">
                    <!-- Carta 1 -->
                    <select id="rank1" class="card-select rank-select">
                        <option>A</option><option>K</option><option>Q</option><option>J</option>
                        <option>10</option><option>9</option><option>8</option><option>7</option>
                        <option>6</option><option>5</option><option>4</option><option>3</option><option>2</option>
                    </select>
                    <select id="suit1" class="card-select">
                        <option>‚ô†</option><option>‚ô•</option><option>‚ô¶</option><option>‚ô£</option>
                    </select>

                    <span class="card-separator">|</span>

                    <!-- Carta 2 -->
                    <select id="rank2" class="card-select rank-select">
                        <option>A</option><option>K</option><option>Q</option><option>J</option>
                        <option>10</option><option>9</option><option>8</option><option>7</option>
                        <option>6</option><option>5</option><option>4</option><option>3</option><option>2</option>
                    </select>
                    <select id="suit2" class="card-select">
                        <option>‚ô†</option><option>‚ô•</option><option>‚ô¶</option><option>‚ô£</option>
                    </select>
                </div>
                <small>El sistema bloquear√° combinaciones duplicadas como A‚ô† A‚ô†.</small>
            </div>

            <!-- Posici√≥n -->
            <div class="form-section">
                <label>Posici√≥n del jugador:</label>
                <select id="posicion" class="card-select">
                    <option value="UTG">UTG</option>
                    <option value="UTG+1">UTG+1</option>
                    <option value="MP">MP</option>
                    <option value="LJ">LJ</option>
                    <option value="HJ">HJ</option>
                    <option value="CO">CO</option>
                    <option value="BTN">BTN</option>
                    <option value="SB">SB</option>
                    <option value="BB">BB</option>
                </select>
            </div>

            <button type="submit">Analizar Mano por Fases</button>
        </form>
    </section>

    <!-- RESULTADO DEL AN√ÅLISIS POR FASES -->
    <section id="phases-panel" class="hidden">

        <!-- Gr√°fico de equity -->
        <h2>üìà Evoluci√≥n de la Equity por Fase</h2>
        <div class="chart-container">
            <canvas id="equity-phase-chart"></canvas>
        </div>

        <!-- PRE-FLOP -->
        <div class="analysis-card">
            <h3>üÇ° Fase Preflop</h3>
            <p><strong>Tu mano:</strong> <span id="preflop-hand-text">-</span></p>
            <p><strong>Categor√≠a estimada:</strong> <span id="preflop-category">-</span></p>
            <p><strong>Equity vs rango est√°ndar:</strong> <span id="preflop-equity">-</span>%</p>
            <p><strong>Recomendaci√≥n:</strong> <span id="preflop-rec">-</span></p>
        </div>

        <!-- FLOP -->
        <div class="analysis-card">
            <h3>üÉè Fase Flop</h3>
            <p><strong>Cartas del flop:</strong> <span id="flop-cards">-</span></p>
            <p><strong>Categor√≠a actual:</strong> <span id="flop-category">-</span></p>
            <p><strong>Equity:</strong> <span id="flop-equity">-</span>%</p>
            <p><strong>Outs:</strong> <span id="flop-outs-count">-</span></p>
            <p><strong>Cartas que mejoran:</strong> <span id="flop-outs-list">-</span></p>
            <p><strong>Recomendaci√≥n:</strong> <span id="flop-rec">-</span></p>
        </div>

        <!-- TURN -->
        <div class="analysis-card">
            <h3>üé¥ Fase Turn</h3>
            <p><strong>Carta del turn:</strong> <span id="turn-card">-</span></p>
            <p><strong>Categor√≠a actual:</strong> <span id="turn-category">-</span></p>
            <p><strong>Equity:</strong> <span id="turn-equity">-</span>%</p>
            <p><strong>Outs:</strong> <span id="turn-outs-count">-</span></p>
            <p><strong>Cartas que mejoran:</strong> <span id="turn-outs-list">-</span></p>
            <p><strong>Recomendaci√≥n:</strong> <span id="turn-rec">-</span></p>
        </div>

        <!-- RIVER -->
        <div class="analysis-card">
            <h3>üÇ† Fase River</h3>
            <p><strong>Carta del river:</strong> <span id="river-card">-</span></p>
            <p><strong>Categor√≠a final:</strong> <span id="river-category">-</span></p>
            <p><strong>Equity final:</strong> <span id="river-equity">-</span>%</p>
            <p><strong>Recomendaci√≥n:</strong> <span id="river-rec">-</span></p>
        </div>

        <!-- CONTEXTO -->
        <div class="analysis-card">
            <h3>üìç Contexto</h3>
            <p><strong>Posici√≥n analizada:</strong> <span id="posicion-analizada">-</span></p>
            <p><strong>Cartas finales simuladas:</strong> <span id="final-cards">-</span></p>
        </div>

        <!-- NUEVO: AN√ÅLISIS GENERAL -->
        <div class="analysis-card">
            <h3>üß† An√°lisis General</h3>
            <p id="resumen-general">-</p>
        </div>

        <!-- NUEVO: RECOMENDACI√ìN FINAL -->
        <div class="analysis-card">
            <h3>üî• Recomendaci√≥n Final</h3>
            <p id="recomendacion-final">-</p>
        </div>

    </section>

    <hr>

    <!-- =========================================
         GR√ÅFICOS DEL DATASET
    ========================================== -->
    <h1>üìà Exploraci√≥n Gr√°fica del Dataset</h1>

    <section id="chart-selector">
        <label>Selecciona un gr√°fico:</label>
        <select id="chart-chooser">
            <option value="winrate-posicion">Winrate por posici√≥n</option>
            <option value="histograma-botes">Histograma de botes</option>
            <option value="agresividad-profit">Agresividad vs Winrate</option>
            <option value="frecuencia-categorias">Frecuencia de manos</option>
            <option value="riesgo-winrate">Riesgo vs Winrate</option>
            <option value="bote-agresividad">Bote promedio seg√∫n agresividad</option>
            <option value="timeline-profit">Profit acumulado en el tiempo</option>
        </select>
    </section>

    <section id="chart-viewer">
        <h2 id="chart-viewer-title"></h2>
        <p id="chart-description"></p>
        <canvas id="chart-canvas" width="600" height="350"></canvas>
    </section>

</main>

<script type="module" src="dist/main.js"></script>

</body>
</html>
